<section>
  @if(!loading) { @if (room.isStarted) { @if(!isResultPageActive) { @if
  (room.gameName !== quizGameKey) {
  <app-word-games
    [room]="room"
    [player]="playerService.currentPlayerSig()!"
    (finishedStepEvent)="updatePlayerGame($event)"
  ></app-word-games>
  } @else {
  <app-ai-games
    [room]="room"
    [player]="playerService.currentPlayerSig()!"
    (finishedStepEvent)="updatePlayerGame($event)"
  ></app-ai-games>
  }} @else { @if (isDetailModeActive) {
  <app-results-details
    [room]="room"
    [player]="playerService.currentPlayerSig()!"
    [players]="players"
  ></app-results-details>
  } @else {
  <app-results-podium
    [room]="room"
    [player]="playerService.currentPlayerSig()!"
    [players]="players"
    (deleteEvent)="removePlayer($event)"
  ></app-results-podium>
  } } } @else {
  <app-waiting-room
    [room]="room"
    [player]="playerService.currentPlayerSig()!"
    [players]="players"
    (deleteEvent)="removePlayer($event)"
  ></app-waiting-room>
  }
  <div class="button-container">
    @if (!isFinishing) {
    <button type="button" title="Quitter" (click)="openDialog()" class="delete">
      <i class="bx bxs-log-out"></i>
      <span class="text">Quitter</span>
    </button>
    } @if (isNextButtonAvailable) {
    <button type="button" (click)="next()" title="Suivant">
      <i class="bx bxs-skip-next-circle"></i>
      <span class="text">Suivant</span>
    </button>
    } @else if (!room.isStarted || isResultPageActive) { @if
    (isResultPageActive) { @if (isDetailModeActive) {
    <button
      type="button"
      (click)="seeDetails()"
      title="Voir podium"
      class="share"
    >
      <i class="bx bxs-trophy"></i>
      <span class="text">Voir podium</span>
    </button>
    } @else {
    <button
      type="button"
      (click)="seeDetails()"
      title="Voir détails"
      class="share"
    >
      <i class="bx bxs-user-detail"></i>
      <span class="text">Voir détails</span>
    </button>
    } }
    <button
      type="button"
      (click)="multiplayer()"
      title="Multijoueur"
      class="share"
    >
      <i class="bx bxs-user-plus"></i>
      <span class="text">Multijoueur</span>
    </button>
    } @if (shouldShowPlayButton()) {
    <button type="button" (click)="openDialogs()" title="Jouer">
      <i class="bx bx-play"></i>
      <span class="text">Jouer</span>
    </button>
    } @else if (shouldShowReadyButton()) {
    <button
      type="button"
      (click)="ready()"
      [title]="playerService.currentPlayerSig()!.isReady ? 'Pas prêt' : 'Prêt'"
      [ngClass]="{ delete: playerService.currentPlayerSig()!.isReady }"
    >
      @if (playerService.currentPlayerSig()!.isReady) {
      <i class="bx bxs-x-circle"></i>
      <span class="text">Pas prêt</span>
      } @else {
      <i class="bx bxs-check-circle"></i>
      <span class="text">Prêt</span>
      }
    </button>
    }
  </div>
  } @else { @if (room.isLoading && room.gameName === quizGameKey) {
  <div class="ai-container">
    <mat-spinner class="ai"></mat-spinner>
    <span
      >L'IA génère les questions du thème
      <span class="accent">{{ room.categoryFilter | quizCategory }}</span>
      en difficulté
      <span class="accent">{{ room.difficultyFilter | difficulty }}</span></span
    >
  </div>
  } @else {
  <mat-spinner></mat-spinner>
  } }
</section>
